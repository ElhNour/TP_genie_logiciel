<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: server.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: server.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * This file establishes the connection with the database and launches both of the server and the app
 * @module server-js
 */


const express = require('express');
/**
 * @member app
 * @description express application that is launched on a localhost and listens to HTTP requests
 */
  app = express();
  const bodyParser = require('body-parser');
  /**
   * @member port 
   * @description specified port for the backend (3000)
   */
  port = process.env.PORT || 3000;


const mysql = require('mysql');
/**
 * database's connection configurations
 * @type {Object}
 */

const mc = mysql.createConnection({
    host: 'localhost',
    user: 'root',
    password: '',
    database: 'forumesi'
});

 // connect to database
mc.connect();

app.listen(port);

console.log('API server started on: ' + port);

/**
 * @member a_peace_of_code_that_fixes_CORS_ERROR
 * @description Cross-Origin error means that the server gets requests only from its port (in this case only from 3000),
 * but the react app is running on port 4000 so if it makes an HTTP request for the server, it won't get a response because it
 * is not allowed due to Cross-Origin error, so we should add some stuffs to the response header and thus requests are allowed from any url.
 */
app.use((req,res,next)=>{
  res.header("Access-Control-Allow-Origin","*");
  res.header("Access-Control-Allow-Headers","Origin,X-Requested-With, Content-Type, Accept, Authorization");
  if(req.method === 'OPTIONS'){
    res.header('Access-Control-Allow-Methods','POST,GET,PUT,PATCH,DELETE');
    return res.status(200).json({}); 
  }
  next();
});

app.use(bodyParser.urlencoded({ extended: true }));
app.use(bodyParser.json());

var routes = require('./server-side/routes/approutes'); //importing route
/**
 * @function routes
 * @param {Express.Application} app -Express app
 * @description indicates how the express app responds to client requests to a particular endpoint, which is a URI (or path) and a specific HTTP request method (GET, POST, and so on).
 * Each route can have one or more handler functions, which are executed when the route is matched.
 */
routes(app); //register the route
module.exports=app;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">name of the app</a></h2><h3>Modules</h3><ul><li><a href="module-automated-tests_test-js.html">automated-tests/test-js</a></li><li><a href="module-client-side_src_App-js.html">client-side/src/App-js</a></li><li><a href="module-client-side_src_components_Question-js.html">client-side/src/components/Question-js</a></li><li><a href="module-client-side_src_components_QuestionForm-js.html">client-side/src/components/QuestionForm-js</a></li><li><a href="module-server-js.html">server-js</a></li><li><a href="module-server-side_controllers_appController-js.html">server-side/controllers/appController-js</a></li><li><a href="module-server-side_model_appModel-js.html">server-side/model/appModel-js</a></li><li><a href="module-server-side_routes_approutes-js.html">server-side/routes/approutes-js</a></li><li><a href="module-unit-tests_service-test-js.html">unit-tests/service-test-js</a></li></ul><h3>Classes</h3><ul><li><a href="module-client-side_src_App-js-App.html">App</a></li><li><a href="module-client-side_src_components_Question-js.html">client-side/src/components/Question-js</a></li><li><a href="module-client-side_src_components_QuestionForm-js.html">client-side/src/components/QuestionForm-js</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-docker.html">Deployment on Docker</a></li><li><a href="tutorial-express-app.html">Express app</a></li><li><a href="tutorial-react-app.html">React app</a></li><li><a href="tutorial-selenium-test.html">Automated Test</a></li><li><a href="tutorial-unit-tests.html">unit-tests</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Wed Jan 01 2020 11:35:24 GMT+0100 (GMT+01:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
